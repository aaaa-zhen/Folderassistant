{
  "permissions": {
    "allow": [
      "Bash(which node && node --version 2>/dev/null; which npm && npm --version 2>/dev/null; which electron 2>/dev/null; which claude 2>/dev/null)",
      "Bash(claude --version 2>/dev/null | head -5)",
      "Bash(python3 -c \"\nimport struct, zlib\n\n# Create a 16x16 RGBA PNG with an orange folder-ish color\nwidth, height = 16, 16\n\n# Build raw pixel data\nraw = b''\nfor y in range\\(height\\):\n    raw += b'\\\\x00'  # filter byte\n    for x in range\\(width\\):\n        # Simple folder shape: top tab \\(rows 3-5, cols 2-7\\), body \\(rows 5-12, cols 2-13\\)\n        if \\(3 <= y <= 4 and 2 <= x <= 7\\) or \\(5 <= y <= 12 and 2 <= x <= 13\\):\n            raw += bytes\\([0x7a, 0xa2, 0xf7, 0xff]\\)  # blue #7aa2f7\n        else:\n            raw += bytes\\([0, 0, 0, 0]\\)  # transparent\n\n# PNG signature\nsig = b'\\\\x89PNG\\\\r\\\\n\\\\x1a\\\\n'\n\ndef make_chunk\\(chunk_type, data\\):\n    c = chunk_type + data\n    return struct.pack\\('>I', len\\(data\\)\\) + c + struct.pack\\('>I', zlib.crc32\\(c\\) & 0xffffffff\\)\n\nihdr_data = struct.pack\\('>IIBBBBB', width, height, 8, 6, 0, 0, 0\\)\nihdr = make_chunk\\(b'IHDR', ihdr_data\\)\nidat = make_chunk\\(b'IDAT', zlib.compress\\(raw\\)\\)\niend = make_chunk\\(b'IEND', b''\\)\n\nwith open\\('assets/tray-icon.png', 'wb'\\) as f:\n    f.write\\(sig + ihdr + idat + iend\\)\n\n# Also create icon.png \\(same thing, 256x256 upscaled\\)\nwidth2, height2 = 32, 32\nscale = 2\nraw2 = b''\nfor y in range\\(height2\\):\n    raw2 += b'\\\\x00'\n    for x in range\\(width2\\):\n        sy, sx = y // scale, x // scale\n        if \\(3 <= sy <= 4 and 2 <= sx <= 7\\) or \\(5 <= sy <= 12 and 2 <= sx <= 13\\):\n            raw2 += bytes\\([0x7a, 0xa2, 0xf7, 0xff]\\)\n        else:\n            raw2 += bytes\\([0, 0, 0, 0]\\)\nihdr2 = make_chunk\\(b'IHDR', struct.pack\\('>IIBBBBB', width2, height2, 8, 6, 0, 0, 0\\)\\)\nidat2 = make_chunk\\(b'IDAT', zlib.compress\\(raw2\\)\\)\nwith open\\('assets/icon.png', 'wb'\\) as f:\n    f.write\\(sig + ihdr2 + idat2 + iend\\)\n\nprint\\('Icons created'\\)\n\")",
      "Bash(npm install 2>&1)",
      "Bash(npx electron-forge start --dry-run 2>&1 || true)",
      "Bash(npx tsc --noEmit 2>&1)",
      "Bash(timeout 30 npx electron-forge start 2>&1 || true)",
      "Bash(find ~/Library/Caches/ -name \"*electron*\" -type f 2>/dev/null | head -5; echo \"---\"; ls -la /Users/meizu/Desktop/Projects/Folderassistant/node_modules/electron/ 2>/dev/null | head -10)",
      "Bash(ls -A | grep -v '^\\\\.claude$' | xargs rm -rf)",
      "Bash(npm install cnpm -g --registry=https://registry.npmmirror.com 2>&1)",
      "Bash(rm -rf node_modules package-lock.json && cnpm install 2>&1)",
      "Bash(cnpm install @anthropic-ai/claude-code --save 2>&1)",
      "Bash(node -e \"const p = require\\('/Users/meizu/Desktop/Projects/Folderassistant/node_modules/@anthropic-ai/claude-code/package.json'\\); console.log\\(JSON.stringify\\(p.bin, null, 2\\)\\)\")",
      "Bash(cnpm install 2>&1)",
      "Bash(pkill -f \"Electron.app\" 2>/dev/null; sleep 1)",
      "Bash(pkill -f \"Electron\" 2>/dev/null; pkill -f \"electron\" 2>/dev/null; sleep 2)",
      "Bash(lsof -ti:9000 -ti:3000 2>/dev/null | xargs kill -9 2>/dev/null; sleep 1; echo \"ports cleared\")",
      "Bash(pkill -f \"Electron\" 2>/dev/null; sleep 1)",
      "Bash(lsof -ti:9000 -ti:3000 2>/dev/null | xargs kill -9 2>/dev/null)",
      "Bash(lsof -ti:9000 -ti:3000 2>/dev/null | xargs kill -9 2>/dev/null; sleep 1)",
      "Bash(npx electron-forge start 2>&1)",
      "Bash(pkill -f \"Electron\" 2>/dev/null; pkill -f \"electron\" 2>/dev/null; sleep 1)",
      "Bash(pkill -f \"Electron\" 2>/dev/null; sleep 2; lsof -ti:9000 -ti:3000 2>/dev/null | xargs kill -9 2>/dev/null; sleep 1)",
      "Bash(pkill -f \"Electron\" 2>/dev/null; pkill -f \"electron\" 2>/dev/null; sleep 2; lsof -ti:9000 -ti:3000 2>/dev/null | xargs kill -9 2>/dev/null; sleep 1)",
      "Bash(pkill -f \"Electron\" 2>/dev/null; sleep 1; lsof -ti:9000 -ti:3000 2>/dev/null | xargs kill -9 2>/dev/null; sleep 1)",
      "Bash(lsof -ti:9000 -ti:3000 2>/dev/null | xargs kill -9 2>/dev/null; sleep 1; npx electron-forge start 2>&1)",
      "Bash(lsof -ti:9000 -ti:3000 2>/dev/null | xargs kill -9 2>/dev/null; sleep 1; npx electron-forge make 2>&1)",
      "Bash(npx electron-forge make 2>&1)",
      "Bash(cd /Users/meizu/Desktop/Projects && rm -f Folderassistant.zip && zip -r Folderassistant.zip Folderassistant -x \"Folderassistant/node_modules/*\" \"Folderassistant/.webpack/*\" \"Folderassistant/out/*\" \"Folderassistant/.claude/*\" \"Folderassistant/.DS_Store\" && ls -lh Folderassistant.zip)",
      "Bash(rm -rf out && npx electron-forge make 2>&1)",
      "Bash(npx asar list \"/Users/meizu/Desktop/Projects/Folderassistant/out/make/zip/darwin/arm64/Folder Assistant.app/Contents/Resources/app.asar\" 2>/dev/null | grep node-pty | head -5)",
      "Bash(find \"/Users/meizu/Desktop/Projects/Folderassistant/out/Folder Assistant-darwin-arm64/Folder Assistant.app\" -name \"node-pty\" -type d 2>/dev/null; echo \"---\"; find \"/Users/meizu/Desktop/Projects/Folderassistant/out/Folder Assistant-darwin-arm64/Folder Assistant.app\" -name \"*.node\" 2>/dev/null | head -5)",
      "Bash(npm install node-pty --no-save 2>&1)",
      "Bash(rm /Users/meizu/Desktop/Projects/Folderassistant/node_modules/node-pty && cp -RL /Users/meizu/Desktop/Projects/Folderassistant/node_modules/.store/node-pty@1.1.0/node_modules/node-pty /Users/meizu/Desktop/Projects/Folderassistant/node_modules/node-pty && echo \"done\" && ls /Users/meizu/Desktop/Projects/Folderassistant/node_modules/node-pty/)",
      "Bash(python3 -c \"\nfrom PIL import Image\nimport struct, io\n\nimg = Image.open\\('assets/icon-256.png'\\).convert\\('RGBA'\\)\n\n# Create ICO with multiple sizes\nsizes = [16, 32, 48, 64, 128, 256]\nimages = []\nfor s in sizes:\n    images.append\\(img.resize\\(\\(s, s\\), Image.LANCZOS\\)\\)\n\n# Save as ICO\nimages[0].save\\('assets/icon.ico', format='ICO', sizes=[\\(s, s\\) for s in sizes], append_images=images[1:]\\)\nprint\\('icon.ico created'\\)\n\")",
      "Bash(pip3 install Pillow -q && python3 -c \"\nfrom PIL import Image\n\nimg = Image.open\\('/Users/meizu/Desktop/Projects/Folderassistant/assets/icon-256.png'\\).convert\\('RGBA'\\)\nsizes = [16, 32, 48, 64, 128, 256]\nimages = [img.resize\\(\\(s, s\\), Image.LANCZOS\\) for s in sizes]\nimages[0].save\\('/Users/meizu/Desktop/Projects/Folderassistant/assets/icon.ico', format='ICO', sizes=[\\(s, s\\) for s in sizes], append_images=images[1:]\\)\nprint\\('icon.ico created'\\)\n\")",
      "Bash(cd /tmp && python3 -m venv ico_venv && source ico_venv/bin/activate && pip install Pillow -q && python3 -c \"\nfrom PIL import Image\nimg = Image.open\\('/Users/meizu/Desktop/Projects/Folderassistant/assets/icon-256.png'\\).convert\\('RGBA'\\)\nsizes = [16, 32, 48, 64, 128, 256]\nimages = [img.resize\\(\\(s, s\\), Image.LANCZOS\\) for s in sizes]\nimages[0].save\\('/Users/meizu/Desktop/Projects/Folderassistant/assets/icon.ico', format='ICO', sizes=[\\(s, s\\) for s in sizes], append_images=images[1:]\\)\nprint\\('icon.ico created'\\)\n\")"
    ]
  }
}
